<?xml version="1.0" encoding="utf-8"?>
<MDIWindow xmlns="flexlib.mdi.containers.*"
		   xmlns:mx="http://www.adobe.com/2006/mxml" 
		   xmlns:mate="http://mate.asfusion.com/"
		   width="700" height="400"
		   title="Adjustments"
		   resizable="false"
		   creationComplete="onCreationComplete()">
	
	<!--creationComplete="onCreationComplete()"-->
	<!-- <mate:Listener type="{LocaleChangeEvent.LOCALE_CHANGED}" method="localeChanged"/> -->
	<mate:Listener type="{MDIWindowEvent.CLOSE}" method="focusButton"/>
		
	<mx:Script>
		<![CDATA[
			
			import com.asfusion.mate.events.Dispatcher;
			import flash.events.Event;
			import flash.events.MouseEvent;
			import flexlib.mdi.containers.MDIWindow;
			import flexlib.mdi.events.MDIWindowEvent;
			
			import mx.events.FlexEvent;
			import mx.managers.PopUpManager;
			import org.bigbluebutton.common.LogUtil;
			import org.bigbluebutton.common.events.LocaleChangeEvent;
			import org.bigbluebutton.main.events.ShortcutEvent;
			import org.bigbluebutton.main.model.ShortcutOptions;
			import org.bigbluebutton.util.i18n.ResourceUtil;
			
			
			[Bindable] private var baseIndex:int = 100;
			
			private function onCreationComplete():void {
				//localeChanged();
				//titleBarOverlay.tabIndex = baseIndex;
				
				//minimizeBtn.tabIndex = baseIndex + 1;
				//maximizeRestoreBtn.tabIndex = baseIndex + 2;
				//closeBtn.tabIndex = baseIndex + 3;
				
				windowControls.minimizeBtn.visible = false;
				windowControls.minimizeBtn.includeInLayout = false;
				//windowControls.maximizeRestoreBtn.visible = false;
				//windowControls.maximizeRestoreBtn.includeInLayout = false;
				
			}
			
			public override function close(event:MouseEvent = null):void {
				var dispatcher:Dispatcher = new Dispatcher();
				dispatcher.dispatchEvent(new ShortcutEvent(ShortcutEvent.FOCUS_SHORTCUT_BUTTON));
				super.close(event);
			}
			
			/*private function localeChanged(e:LocaleChangeEvent = null):void {
				//reloadKeys();
				resourcesChanged();
			}*/
			
			public function focusButton(e:MDIWindowEvent):void {
				LogUtil.debug("Caught close event from window");
				var dispatcher:Dispatcher = new Dispatcher();
				dispatcher.dispatchEvent(new ShortcutEvent(ShortcutEvent.FOCUS_SHORTCUT_BUTTON));
			}
			
		]]>
	</mx:Script>
	
	<mx:TabNavigator width="100%" height="100%">
		<mx:Canvas width="100%" height="100%" label=" Audio ">
			<mx:CheckBox x="220" y="90" label="Sound when new chat message"/>
			<mx:CheckBox x="220" y="140" label="Sound when participant leaves the room"/>
			<mx:Button x="610" y="305" label="Save"/>
		</mx:Canvas>
		<mx:Canvas width="100%" height="100%" label=" Layout ">
			<mx:Label x="220" y="50" text="Which window should be displayed?"/>
			<mx:CheckBox x="290" y="100" label="Users" selected="true"/>
			<mx:CheckBox x="290" y="150" label="Webcams" selected="true"/>
			<mx:CheckBox x="290" y="200" label="Chat" selected="true"/>
			<mx:Button x="610" y="305" label="Save"/>
		</mx:Canvas>
	</mx:TabNavigator>
</MDIWindow>